import w from"../../Jetstream/ActionMessage.vue.js";import J from"../../Jetstream/ActionSection.vue.js";import B from"../../Jetstream/Button.vue.js";import S from"../../Jetstream/ConfirmationModal.vue.js";import $ from"../../Jetstream/DangerButton.vue.js";import L from"../../Jetstream/DialogModal.vue.js";import A from"../../Jetstream/FormSection.vue.js";import V from"../../Jetstream/Input.vue.js";import P from"../../Jetstream/InputError.vue.js";import I from"../../Jetstream/Label.vue.js";import z from"../../Jetstream/SecondaryButton.vue.js";import D from"../../Jetstream/SectionBorder.vue.js";const T={components:{JetActionMessage:w,JetActionSection:J,JetButton:B,JetConfirmationModal:S,JetDangerButton:$,JetDialogModal:L,JetFormSection:A,JetInput:V,JetInputError:P,JetLabel:I,JetSecondaryButton:z,JetSectionBorder:D},props:["team","availableRoles","userPermissions"],data(){return{addTeamMemberForm:this.$inertia.form({email:"",role:null}),updateRoleForm:this.$inertia.form({role:null}),leaveTeamForm:this.$inertia.form(),removeTeamMemberForm:this.$inertia.form(),currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null}},methods:{addTeamMember(){this.addTeamMemberForm.post(route("team-members.store",this.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>this.addTeamMemberForm.reset()})},cancelTeamInvitation(e){this.$inertia.delete(route("team-invitations.destroy",e),{preserveScroll:!0})},manageRole(e){this.managingRoleFor=e,this.updateRoleForm.role=e.membership.role,this.currentlyManagingRole=!0},updateRole(){this.updateRoleForm.put(route("team-members.update",[this.team,this.managingRoleFor]),{preserveScroll:!0,onSuccess:()=>this.currentlyManagingRole=!1})},confirmLeavingTeam(){this.confirmingLeavingTeam=!0},leaveTeam(){this.leaveTeamForm.delete(route("team-members.destroy",[this.team,this.$page.props.user]))},confirmTeamMemberRemoval(e){this.teamMemberBeingRemoved=e},removeTeamMember(){this.removeTeamMemberForm.delete(route("team-members.destroy",[this.team,this.teamMemberBeingRemoved]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>this.teamMemberBeingRemoved=null})},displayableRole(e){return this.availableRoles.find(i=>i.key===e).name}}};import{resolveComponent as l,createVNode as o,createTextVNode as a,renderList as c,Fragment as p,openBlock as n,createBlock as r,toDisplayString as u,createCommentVNode as m,withCtx as s}from"../../../_snowpack/pkg/vue.js";const N={key:0},E=a(" Add Team Member "),O=a(" Add a new team member to your team, allowing them to collaborate with you. "),U=o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1),q={class:"col-span-6 sm:col-span-4"},G={key:0,class:"col-span-6 lg:col-span-4"},H={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},K={class:"flex items-center"},Q={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},W=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),X={class:"mt-2 text-xs text-gray-600"},Y=a(" Added. "),Z=a(" Add "),x={key:1},ee=a(" Pending Team Invitations "),oe=a(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. "),te={class:"space-y-6"},se={class:"text-gray-600"},ne={class:"flex items-center"},re={key:2},ae=a(" Team Members "),ie=a(" All of the people that are part of this team. "),le={class:"space-y-6"},me={class:"flex items-center"},de={class:"ml-4"},ue={class:"flex items-center"},ce={key:1,class:"ml-2 text-sm text-gray-400"},pe=a(" Manage Role "),ve={key:0},be={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},ge={class:"flex items-center"},he={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},fe=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),_e={class:"mt-2 text-xs text-gray-600"},ye=a(" Cancel "),ke=a(" Save "),Te=a(" Leave Team "),Me=a(" Are you sure you would like to leave this team? "),Re=a(" Cancel "),je=a(" Leave "),Fe=a(" Remove Team Member "),Ce=a(" Are you sure you would like to remove this person from the team? "),we=a(" Cancel "),Je=a(" Remove ");export function render(e,i){const v=l("jet-section-border"),g=l("jet-label"),M=l("jet-input"),h=l("jet-input-error"),R=l("jet-action-message"),f=l("jet-button"),j=l("jet-form-section"),_=l("jet-action-section"),b=l("jet-secondary-button"),F=l("jet-dialog-modal"),y=l("jet-danger-button"),k=l("jet-confirmation-modal");return n(),r("div",null,[e.userPermissions.canAddTeamMembers?(n(),r("div",N,[o(v),o(j,{onSubmitted:e.addTeamMember},{title:s(()=>[E]),description:s(()=>[O]),form:s(()=>[U,o("div",q,[o(g,{for:"email",value:"Email"}),o(M,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e.addTeamMemberForm.email,"onUpdate:modelValue":i[1]||(i[1]=t=>e.addTeamMemberForm.email=t)},null,8,["modelValue"]),o(h,{message:e.addTeamMemberForm.errors.email,class:"mt-2"},null,8,["message"])]),e.availableRoles.length>0?(n(),r("div",G,[o(g,{for:"roles",value:"Role"}),o(h,{message:e.addTeamMemberForm.errors.role,class:"mt-2"},null,8,["message"]),o("div",H,[(n(!0),r(p,null,c(e.availableRoles,(t,d)=>(n(),r("button",{type:"button",class:["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":d>0,"rounded-b-none":d!=Object.keys(e.availableRoles).length-1}],onClick:C=>e.addTeamMemberForm.role=t.key,key:t.key},[o("div",{class:{"opacity-50":e.addTeamMemberForm.role&&e.addTeamMemberForm.role!=t.key}},[o("div",K,[o("div",{class:["text-sm text-gray-600",{"font-semibold":e.addTeamMemberForm.role==t.key}]},u(t.name),3),e.addTeamMemberForm.role==t.key?(n(),r("svg",Q,[W])):m("",!0)]),o("div",X,u(t.description),1)],2)],10,["onClick"]))),128))])])):m("",!0)]),actions:s(()=>[o(R,{on:e.addTeamMemberForm.recentlySuccessful,class:"mr-3"},{default:s(()=>[Y]),_:1},8,["on"]),o(f,{class:{"opacity-25":e.addTeamMemberForm.processing},disabled:e.addTeamMemberForm.processing},{default:s(()=>[Z]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])])):m("",!0),e.team.team_invitations.length>0&&e.userPermissions.canAddTeamMembers?(n(),r("div",x,[o(v),o(_,{class:"mt-10 sm:mt-0"},{title:s(()=>[ee]),description:s(()=>[oe]),content:s(()=>[o("div",te,[(n(!0),r(p,null,c(e.team.team_invitations,t=>(n(),r("div",{class:"flex items-center justify-between",key:t.id},[o("div",se,u(t.email),1),o("div",ne,[e.userPermissions.canRemoveTeamMembers?(n(),r("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:d=>e.cancelTeamInvitation(t)}," Cancel ",8,["onClick"])):m("",!0)])]))),128))])]),_:1})])):m("",!0),e.team.users.length>0?(n(),r("div",re,[o(v),o(_,{class:"mt-10 sm:mt-0"},{title:s(()=>[ae]),description:s(()=>[ie]),content:s(()=>[o("div",le,[(n(!0),r(p,null,c(e.team.users,t=>(n(),r("div",{class:"flex items-center justify-between",key:t.id},[o("div",me,[o("img",{class:"w-8 h-8 rounded-full",src:t.profile_photo_url,alt:t.name},null,8,["src","alt"]),o("div",de,u(t.name),1)]),o("div",ue,[e.userPermissions.canAddTeamMembers&&e.availableRoles.length?(n(),r("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:d=>e.manageRole(t)},u(e.displayableRole(t.membership.role)),9,["onClick"])):e.availableRoles.length?(n(),r("div",ce,u(e.displayableRole(t.membership.role)),1)):m("",!0),e.$page.props.user.id===t.id?(n(),r("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:i[2]||(i[2]=(...d)=>e.confirmLeavingTeam&&e.confirmLeavingTeam(...d))}," Leave ")):m("",!0),e.userPermissions.canRemoveTeamMembers?(n(),r("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:d=>e.confirmTeamMemberRemoval(t)}," Remove ",8,["onClick"])):m("",!0)])]))),128))])]),_:1})])):m("",!0),o(F,{show:e.currentlyManagingRole,onClose:i[4]||(i[4]=t=>e.currentlyManagingRole=!1)},{title:s(()=>[pe]),content:s(()=>[e.managingRoleFor?(n(),r("div",ve,[o("div",be,[(n(!0),r(p,null,c(e.availableRoles,(t,d)=>(n(),r("button",{type:"button",class:["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":d>0,"rounded-b-none":d!==Object.keys(e.availableRoles).length-1}],onClick:C=>e.updateRoleForm.role=t.key,key:t.key},[o("div",{class:{"opacity-50":e.updateRoleForm.role&&e.updateRoleForm.role!==t.key}},[o("div",ge,[o("div",{class:["text-sm text-gray-600",{"font-semibold":e.updateRoleForm.role===t.key}]},u(t.name),3),e.updateRoleForm.role===t.key?(n(),r("svg",he,[fe])):m("",!0)]),o("div",_e,u(t.description),1)],2)],10,["onClick"]))),128))])])):m("",!0)]),footer:s(()=>[o(b,{onClick:i[3]||(i[3]=t=>e.currentlyManagingRole=!1)},{default:s(()=>[ye]),_:1}),o(f,{class:["ml-2",{"opacity-25":e.updateRoleForm.processing}],onClick:e.updateRole,disabled:e.updateRoleForm.processing},{default:s(()=>[ke]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),o(k,{show:e.confirmingLeavingTeam,onClose:i[6]||(i[6]=t=>e.confirmingLeavingTeam=!1)},{title:s(()=>[Te]),content:s(()=>[Me]),footer:s(()=>[o(b,{onClick:i[5]||(i[5]=t=>e.confirmingLeavingTeam=!1)},{default:s(()=>[Re]),_:1}),o(y,{class:["ml-2",{"opacity-25":e.leaveTeamForm.processing}],onClick:e.leaveTeam,disabled:e.leaveTeamForm.processing},{default:s(()=>[je]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),o(k,{show:e.teamMemberBeingRemoved,onClose:i[8]||(i[8]=t=>e.teamMemberBeingRemoved=null)},{title:s(()=>[Fe]),content:s(()=>[Ce]),footer:s(()=>[o(b,{onClick:i[7]||(i[7]=t=>e.teamMemberBeingRemoved=null)},{default:s(()=>[we]),_:1}),o(y,{class:["ml-2",{"opacity-25":e.removeTeamMemberForm.processing}],onClick:e.removeTeamMember,disabled:e.removeTeamMemberForm.processing},{default:s(()=>[Je]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}T.render=render;export default T;
