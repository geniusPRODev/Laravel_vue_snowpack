import f from"../../Jetstream/ActionSection.vue.js";import p from"../../Jetstream/Button.vue.js";import y from"../../Jetstream/ConfirmsPassword.vue.js";import g from"../../Jetstream/DangerButton.vue.js";import v from"../../Jetstream/SecondaryButton.vue.js";const u={components:{JetActionSection:f,JetButton:p,JetConfirmsPassword:y,JetDangerButton:g,JetSecondaryButton:v},data(){return{enabling:!1,disabling:!1,qrCode:null,recoveryCodes:[]}},methods:{enableTwoFactorAuthentication(){this.enabling=!0,this.$inertia.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:()=>Promise.all([this.showQrCode(),this.showRecoveryCodes()]),onFinish:()=>this.enabling=!1})},showQrCode(){return axios.get("/user/two-factor-qr-code").then(e=>{this.qrCode=e.data.svg})},showRecoveryCodes(){return axios.get("/user/two-factor-recovery-codes").then(e=>{this.recoveryCodes=e.data})},regenerateRecoveryCodes(){axios.post("/user/two-factor-recovery-codes").then(e=>{this.showRecoveryCodes()})},disableTwoFactorAuthentication(){this.disabling=!0,this.$inertia.delete("/user/two-factor-authentication",{preserveScroll:!0,onSuccess:()=>this.disabling=!1})}},computed:{twoFactorEnabled(){return!this.enabling&&this.$page.props.user.two_factor_enabled}}};import{createTextVNode as a,openBlock as o,createBlock as n,createCommentVNode as r,createVNode as t,renderList as w,Fragment as b,toDisplayString as C,resolveComponent as i,withCtx as s}from"../../../_snowpack/pkg/vue.js";const k=a(" Two Factor Authentication "),j=a(" Add additional security to your account using two factor authentication. "),x={key:0,class:"text-lg font-medium text-gray-900"},S={key:1,class:"text-lg font-medium text-gray-900"},F=t("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[t("p",null," When two factor authentication is enabled, you will be prompted for a secure, random token during authentication. You may retrieve this token from your phone's Google Authenticator application. ")],-1),T={key:2},B={key:0},J=t("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[t("p",{class:"font-semibold"}," Two factor authentication is now enabled. Scan the following QR code using your phone's authenticator application. ")],-1),R={key:1},A=t("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[t("p",{class:"font-semibold"}," Store these recovery codes in a secure password manager. They can be used to recover access to your account if your two factor authentication device is lost. ")],-1),E={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},N={class:"mt-5"},V={key:0},q=a(" Enable "),D={key:1},L=a(" Regenerate Recovery Codes "),P=a(" Show Recovery Codes "),Q=a(" Disable ");export function render(e,Y){const h=i("jet-button"),c=i("jet-confirms-password"),d=i("jet-secondary-button"),m=i("jet-danger-button"),_=i("jet-action-section");return o(),n(_,null,{title:s(()=>[k]),description:s(()=>[j]),content:s(()=>[e.twoFactorEnabled?(o(),n("h3",x," You have enabled two factor authentication. ")):(o(),n("h3",S," You have not enabled two factor authentication. ")),F,e.twoFactorEnabled?(o(),n("div",T,[e.qrCode?(o(),n("div",B,[J,t("div",{class:"mt-4 dark:p-4 dark:w-56 dark:bg-white",innerHTML:e.qrCode},null,8,["innerHTML"])])):r("",!0),e.recoveryCodes.length>0?(o(),n("div",R,[A,t("div",E,[(o(!0),n(b,null,w(e.recoveryCodes,l=>(o(),n("div",{key:l},C(l),1))),128))])])):r("",!0)])):r("",!0),t("div",N,[e.twoFactorEnabled?(o(),n("div",D,[t(c,{onConfirmed:e.regenerateRecoveryCodes},{default:s(()=>[e.recoveryCodes.length>0?(o(),n(d,{key:0,class:"mr-3"},{default:s(()=>[L]),_:1})):r("",!0)]),_:1},8,["onConfirmed"]),t(c,{onConfirmed:e.showRecoveryCodes},{default:s(()=>[e.recoveryCodes.length===0?(o(),n(d,{key:0,class:"mr-3"},{default:s(()=>[P]),_:1})):r("",!0)]),_:1},8,["onConfirmed"]),t(c,{onConfirmed:e.disableTwoFactorAuthentication},{default:s(()=>[t(m,{class:{"opacity-25":e.disabling},disabled:e.disabling},{default:s(()=>[Q]),_:1},8,["class","disabled"])]),_:1},8,["onConfirmed"])])):(o(),n("div",V,[t(c,{onConfirmed:e.enableTwoFactorAuthentication},{default:s(()=>[t(h,{type:"button",class:{"opacity-25":e.enabling},disabled:e.enabling},{default:s(()=>[q]),_:1},8,["class","disabled"])]),_:1},8,["onConfirmed"])]))])]),_:1})}u.render=render;export default u;
