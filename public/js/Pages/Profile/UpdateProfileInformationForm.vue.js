import j from"../../Jetstream/Button.vue.js";import b from"../../Jetstream/FormSection.vue.js";import k from"../../Jetstream/Input.vue.js";import y from"../../Jetstream/InputError.vue.js";import S from"../../Jetstream/Label.vue.js";import J from"../../Jetstream/ActionMessage.vue.js";import V from"../../Jetstream/SecondaryButton.vue.js";const d={components:{JetActionMessage:J,JetButton:j,JetFormSection:b,JetInput:k,JetInputError:y,JetLabel:S,JetSecondaryButton:V},props:["user"],data(){return{form:this.$inertia.form({_method:"PUT",name:this.user.name,email:this.user.email,photo:null}),photoPreview:null}},methods:{updateProfileInformation(){this.$refs.photo&&(this.form.photo=this.$refs.photo.files[0]),this.form.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>this.clearPhotoFileInput()})},selectNewPhoto(){this.$refs.photo.click()},updatePhotoPreview(){const e=this.$refs.photo.files[0];if(!e)return;const t=new FileReader;t.onload=a=>{this.photoPreview=a.target.result},t.readAsDataURL(e)},deletePhoto(){this.$inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{this.photoPreview=null,this.clearPhotoFileInput()}})},clearPhotoFileInput(){this.$refs.photo?.value&&(this.$refs.photo.value=null)}}};import{createTextVNode as n,createVNode as o,resolveComponent as r,vShow as h,withDirectives as f,withModifiers as v,withCtx as s,openBlock as m,createBlock as u,createCommentVNode as _}from"../../../_snowpack/pkg/vue.js";const C=n(" Profile Information "),I=n(" Update your account's profile information and email address. "),N={key:0,class:"col-span-6 sm:col-span-4"},B={class:"mt-2"},$={class:"mt-2"},F=n(" Select A New Photo "),U=n(" Remove Photo "),A={class:"col-span-6 sm:col-span-4"},E={class:"col-span-6 sm:col-span-4"},M=n(" Saved. "),D=n(" Save ");export function render(e,t){const a=r("jet-label"),p=r("jet-secondary-button"),i=r("jet-input-error"),c=r("jet-input"),P=r("jet-action-message"),w=r("jet-button"),g=r("jet-form-section");return m(),u(g,{onSubmitted:e.updateProfileInformation},{title:s(()=>[C]),description:s(()=>[I]),form:s(()=>[e.$page.props.jetstream.managesProfilePhotos?(m(),u("div",N,[o("input",{type:"file",class:"hidden",ref:"photo",onChange:t[1]||(t[1]=(...l)=>e.updatePhotoPreview&&e.updatePhotoPreview(...l))},null,544),o(a,{for:"photo",value:"Photo"}),f(o("div",B,[o("img",{src:e.user.profile_photo_url,alt:e.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,["src","alt"])],512),[[h,!e.photoPreview]]),f(o("div",$,[o("span",{class:"block rounded-full w-20 h-20",style:"background-size: cover; background-repeat: no-repeat; background-position: center center; background-image: url('"+e.photoPreview+"');"},null,4)],512),[[h,e.photoPreview]]),o(p,{class:"mt-2 mr-2",type:"button",onClick:v(e.selectNewPhoto,["prevent"])},{default:s(()=>[F]),_:1},8,["onClick"]),e.user.profile_photo_path?(m(),u(p,{key:0,type:"button",class:"mt-2",onClick:v(e.deletePhoto,["prevent"])},{default:s(()=>[U]),_:1},8,["onClick"])):_("",!0),o(i,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])])):_("",!0),o("div",A,[o(a,{for:"name",value:"Name"}),o(c,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=l=>e.form.name=l),autocomplete:"name"},null,8,["modelValue"]),o(i,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),o("div",E,[o(a,{for:"email",value:"Email"}),o(c,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e.form.email,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.email=l)},null,8,["modelValue"]),o(i,{message:e.form.errors.email,class:"mt-2"},null,8,["message"])])]),actions:s(()=>[o(P,{on:e.form.recentlySuccessful,class:"mr-3"},{default:s(()=>[M]),_:1},8,["on"]),o(w,{class:{"opacity-25":e.form.processing},disabled:e.form.processing},{default:s(()=>[D]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])}d.render=render;export default d;
