import{d as H,r as k,p as K,o as q,w as V,c as Y,a as se,h as ve,i as T}from"../common/runtime-core.esm-bundler-fbddfa71.js";function E(){return E=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},E.apply(this,arguments)}function z(e,r){if(e==null)return{};var n={},t=Object.keys(e),p,u;for(u=0;u<t.length;u++)p=t[u],!(r.indexOf(p)>=0)&&(n[p]=e[p]);return n}function fe(e,r){if(!!e){if(typeof e=="string")return J(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,r)}}function J(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function de(e,r){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=fe(e))||r&&e&&typeof e.length=="number"){n&&(e=n);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=e[Symbol.iterator](),n.next.bind(n)}function N(e,r){if(e in r){for(var n=r[e],t=arguments.length,p=new Array(t>2?t-2:0),u=2;u<t;u++)p[u-2]=arguments[u];return typeof n=="function"?n.apply(void 0,p):n}var l=new Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(r).map(function(v){return'"'+v+'"'}).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(l,N),l}var O;(function(e){e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static"})(O||(O={}));var x;(function(e){e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden"})(x||(x={}));function G(e){var r=e.visible,n=r===void 0?!0:r,t=e.features,p=t===void 0?O.None:t,u=z(e,["visible","features"]);if(n||p&O.Static&&u.props.static)return $(u);if(p&O.RenderStrategy){var l,v,o=((l=u.props.unmount)!=null?l:!0)?x.Unmount:x.Hidden;return N(o,(v={},v[x.Unmount]=function(){return null},v[x.Hidden]=function(){return $(E({},u,{props:E({},u.props,{hidden:!0,style:{display:"none"}})}))},v))}return $(u)}function $(e){var r=e.props,n=e.attrs,t=e.slots,p=e.slot,u=e.name,l=ce(r,["unmount","static"]),v=l.as,o=z(l,["as"]),s=t.default==null?void 0:t.default(p);if(v==="template"){if(Object.keys(o).length>0||Object.keys(n).length>0){var a=s??[],d=a[0],y=a.slice(1);if(!me(d)||y.length>0)throw new Error(['Passing props on "template"!',"","The current component <"+u+' /> is rendering a "template".',"However we need to passthrough the following props:",Object.keys(o).concat(Object.keys(n)).map(function(h){return"  - "+h}).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(function(h){return"  - "+h}).join(`
`)].join(`
`));return se(d,o)}return Array.isArray(s)&&s.length===1?s[0]:s}return ve(v,o,s)}function ce(e,r){r===void 0&&(r=[]);for(var n=Object.assign({},e),t=de(r),p;!(p=t()).done;){var u=p.value;u in n&&delete n[u]}return n}function me(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var P;(function(e){e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab"})(P||(P={}));var he=0;function be(){return++he}function Q(){return be()}var R=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(function(e){return e+":not([tabindex='-1'])"}).join(","),c;(function(e){e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll"})(c||(c={}));var g;(function(e){e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow"})(g||(g={}));var D;(function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"})(D||(D={}));function B(e){return e===void 0&&(e=document.body),e==null?[]:Array.from(e.querySelectorAll(R))}var A;(function(e){e[e.Strict=0]="Strict",e[e.Loose=1]="Loose"})(A||(A={}));function Pe(e,r){var n;return r===void 0&&(r=A.Strict),e===document.body?!1:N(r,(n={},n[A.Strict]=function(){return e.matches(R)},n[A.Loose]=function(){for(var t=e;t!==null;){if(t.matches(R))return!0;t=t.parentElement}return!1},n))}function C(e,r){var n=Array.isArray(e)?e:B(e),t=document.activeElement,p=function(){if(r&(c.First|c.Next))return D.Next;if(r&(c.Previous|c.Last))return D.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),u=function(){if(r&c.First)return 0;if(r&c.Previous)return Math.max(0,n.indexOf(t))-1;if(r&c.Next)return Math.max(0,n.indexOf(t))+1;if(r&c.Last)return n.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")}(),l=r&c.NoScroll?{preventScroll:!0}:{},v=0,o=n.length,s=void 0;do{var a;if(v>=o||v+o<=0)return g.Error;var d=u+v;if(r&c.WrapAround)d=(d+o)%o;else{if(d<0)return g.Underflow;if(d>=o)return g.Overflow}s=n[d],(a=s)==null||a.focus(l),v+=p}while(s!==document.activeElement);return s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),g.Success}function I(e,r,n){window.addEventListener(e,r,n),q(function(){return window.removeEventListener(e,r,n)})}var X;(function(e){e[e.AddElement=0]="AddElement",e[e.RemoveElement=1]="RemoveElement"})(X||(X={}));function i(e){var r;return e==null||e.value==null?null:(r=e.value.$el)!=null?r:e.value}var Z=Symbol("Context"),L;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(L||(L={}));function ye(){return T(Z,null)}function we(e){K(Z,e)}var M;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(M||(M={}));var F;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(F||(F={}));var ee;(function(e){e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing"})(ee||(ee={}));var ne;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(ne||(ne={}));var te;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(te||(te={}));var f;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(f||(f={}));var re=Symbol("PopoverContext");function U(e){var r=T(re,null);if(r===null){var n=new Error("<"+e+" /> is missing a parent <"+ie.name+" /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,U),n}return r}var ge=Symbol("PopoverGroupContext");function oe(){return T(ge,null)}var ae=Symbol("PopoverPanelContext");function Oe(){return T(ae,null)}var ie=H({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup:function(r,n){var t=n.slots,p=n.attrs,u=E({},r),l="headlessui-popover-button-"+Q(),v="headlessui-popover-panel-"+Q(),o=k(f.Closed),s=k(null),a=k(null),d={popoverState:o,buttonId:l,panelId:v,panel:a,button:s,togglePopover:function(){var b;o.value=N(o.value,(b={},b[f.Open]=f.Closed,b[f.Closed]=f.Open,b))},closePopover:function(){o.value!==f.Closed&&(o.value=f.Closed)}};K(re,d),we(Y(function(){var m;return N(o.value,(m={},m[f.Open]=L.Open,m[f.Closed]=L.Closed,m))}));var y={buttonId:l,panelId:v,close:function(){d.closePopover()}},h=oe(),w=h==null?void 0:h.registerPopover;function S(){var m,b,j;return(m=h==null?void 0:h.isFocusWithinPopoverGroup())!=null?m:((b=i(s))==null?void 0:b.contains(document.activeElement))||((j=i(a))==null?void 0:j.contains(document.activeElement))}return V(function(){return w==null?void 0:w(y)}),I("focus",function(){o.value===f.Open&&(S()||!s||!a||d.closePopover())},!0),I("mousedown",function(m){var b,j,W=m.target;if(o.value===f.Open&&!((b=i(s))==null?void 0:b.contains(W))&&!((j=i(a))==null?void 0:j.contains(W))&&(d.closePopover(),!Pe(W,A.Loose))){var _;m.preventDefault(),(_=i(s))==null||_.focus()}}),function(){var m={open:o.value===f.Open};return G({props:u,slot:m,slots:t,attrs:p,name:"Popover"})}}}),Ee=H({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},render:function(){var r=U("PopoverButton"),n={open:r.popoverState.value===f.Open},t=this.isWithinPanel?{type:"button",onKeydown:this.handleKeyDown,onClick:this.handleClick}:{ref:"el",id:r.buttonId,type:"button","aria-expanded":r.popoverState.value===f.Open?!0:void 0,"aria-controls":i(r.panel)?r.panelId:void 0,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp,onClick:this.handleClick};return G({props:E({},this.$props,t),slot:n,attrs:this.$attrs,slots:this.$slots,name:"PopoverButton"})},setup:function(r){var n=U("PopoverButton"),t=oe(),p=t==null?void 0:t.closeOthers,u=Oe(),l=u===null?!1:u===n.panelId,v=k(null),o=k(typeof window=="undefined"?null:document.activeElement);return I("focus",function(){o.value=v.value,v.value=document.activeElement},!0),{isWithinPanel:l,el:l?null:n.button,handleKeyDown:function(a){var d,y;if(l){if(n.popoverState.value===f.Closed)return;switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),n.closePopover(),(d=i(n.button))==null||d.focus();break}}else switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),n.popoverState.value===f.Closed&&(p==null||p(n.buttonId)),n.togglePopover();break;case P.Escape:if(n.popoverState.value!==f.Open)return p==null?void 0:p(n.buttonId);if(!i(n.button)||!((y=i(n.button))==null?void 0:y.contains(document.activeElement)))return;n.closePopover();break;case P.Tab:if(n.popoverState.value!==f.Open||!n.panel||!n.button)return;if(a.shiftKey){var h,w;if(!o.value||((h=i(n.button))==null?void 0:h.contains(o.value))||((w=i(n.panel))==null?void 0:w.contains(o.value)))return;var S=B(),m=S.indexOf(o.value),b=S.indexOf(i(n.button));if(b>m)return;a.preventDefault(),a.stopPropagation(),C(i(n.panel),c.Last)}else a.preventDefault(),a.stopPropagation(),C(i(n.panel),c.First);break}},handleKeyUp:function(a){var d,y;if(!l&&(a.key===P.Space&&a.preventDefault(),n.popoverState.value===f.Open&&!!n.panel&&!!n.button))switch(a.key){case P.Tab:if(!o.value||((d=i(n.button))==null?void 0:d.contains(o.value))||((y=i(n.panel))==null?void 0:y.contains(o.value)))return;var h=B(),w=h.indexOf(o.value),S=h.indexOf(i(n.button));if(S>w)return;a.preventDefault(),a.stopPropagation(),C(i(n.panel),c.Last);break}},handleClick:function(){if(!r.disabled)if(l){var a;n.closePopover(),(a=i(n.button))==null||a.focus()}else{var d;n.popoverState.value===f.Closed&&(p==null||p(n.buttonId)),(d=i(n.button))==null||d.focus(),n.togglePopover()}},handleFocus:function(){}}}}),Ce=H({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1}},render:function(){var r=U("PopoverPanel"),n={open:r.popoverState.value===f.Open},t={ref:"el",id:this.id,onKeydown:this.handleKeyDown};return G({props:E({},this.$props,t),slot:n,attrs:this.$attrs,slots:this.$slots,features:O.RenderStrategy|O.Static,visible:this.visible,name:"PopoverPanel"})},setup:function(r){var n=r.focus,t=U("PopoverPanel");K(ae,t.panelId),q(function(){t.panel.value=null}),V(function(){var l;if(!!n&&t.popoverState.value===f.Open&&!!t.panel){var v=document.activeElement;((l=i(t.panel))==null?void 0:l.contains(v))||C(i(t.panel),c.First)}}),I("keydown",function(l){var v;if(t.popoverState.value===f.Open&&!!i(t.panel)&&l.key===P.Tab&&!!document.activeElement&&!!((v=i(t.panel))==null?void 0:v.contains(document.activeElement))){l.preventDefault();var o=C(i(t.panel),l.shiftKey?c.Previous:c.Next);if(o===g.Underflow){var s;return(s=i(t.button))==null?void 0:s.focus()}else if(o===g.Overflow){if(!i(t.button))return;var a=B(),d=a.indexOf(i(t.button)),y=a.splice(d+1).filter(function(h){var w;return!((w=i(t.panel))==null?void 0:w.contains(h))});C(y,c.First)===g.Error&&C(document.body,c.First)}}}),I("focus",function(){var l;!n||t.popoverState.value===f.Open&&(!i(t.panel)||((l=i(t.panel))==null?void 0:l.contains(document.activeElement))||t.closePopover())},!0);var p=ye(),u=Y(function(){return p!==null?p.value===L.Open:t.popoverState.value===f.Open});return{id:t.panelId,el:t.panel,handleKeyDown:function(v){var o,s;switch(v.key){case P.Escape:if(t.popoverState.value!==f.Open||!i(t.panel)||!((o=i(t.panel))==null?void 0:o.contains(document.activeElement)))return;v.preventDefault(),t.closePopover(),(s=i(t.button))==null||s.focus();break}},visible:u}}}),ue;(function(e){e[e.Empty=1]="Empty",e[e.Active=2]="Active"})(ue||(ue={}));var le;(function(e){e.Finished="finished",e.Cancelled="cancelled"})(le||(le={}));var pe;(function(e){e.Visible="visible",e.Hidden="hidden"})(pe||(pe={}));var xe=O.RenderStrategy;export{ie as Popover,Ee as PopoverButton,Ce as PopoverPanel};
